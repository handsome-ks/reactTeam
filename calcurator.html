<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>calculator</title>
</head>
<style>
  html, body{
    padding: 0;
    margin: 0;
  }

  .setting{
    width: 400px;
    height: 500px;
    position: absolute;
    left: 350px;
    top: 250px;
    background-color: #000000;
    color:#f5f5f5;
    border-collapse: collapse;
    border-radius: 15px;
  }

  input{
    width: 400px;
    height: 70px;
    border: none;
    text-align: right;
    font-size: 30px;
    background-color: #000000;
    color:#f5f5f5;
  }

  input:focus{
    outline: none;
  }

  td {
    padding: 5px 10px;
    text-align: center;
    font-size: 30px;
    font-weight: 500;
    border: 1px solid;
    border-color: #ffffff;
  }
</style>

<body>
  <table class="setting">
    <tr>
      <td colspan="4">
        <input type="text" id="input">
      </td>
    </tr>
    <tr>
      <td colspan="3" class="ac">AC</td>
      <td class="ari">/</td>
    </tr>
    <tr>
      <td class="btn">7</td>
      <td class="btn">8</td>
      <td class="btn">9</td>
      <td class="ari">*</td>
    </tr>
    <tr>
      <td class="btn">4</td>
      <td class="btn">5</td>
      <td class="btn">6</td>
      <td class="ari">-</td>
    </tr>
    <tr>
      <td class="btn">1</td>
      <td class="btn">2</td>
      <td class="btn">3</td>
      <td class="ari">+</td>
    </tr>
    <tr>
      <td colspan="2" class="btn">0</td>
      <td class="btn">.</td>
      <td class="eq">=</td>
    </tr>
  </table>
</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script type="text/javascript">

    $(document).ready(function(){
      const inputArea = $("#input"); //인풋창

      inputArea.val(0);//초기화 0

      const btns = $(".btn"); //btn 버튼

      const ariBtns = $(".ari"); //연산버튼들

      const acBtn = $(".ac");

      const eqBtn = $(".eq");

      let ariBool = false; // 연산버튼을 눌렀는지 확인 (참 = 누름)

      //변수 값 추가
      let arrData = [];

      //계산 값 추가
      let calData = [];

      btns.on("click",function(el){
        
        let clickData = el.target.innerHTML;

        if(clickData === "."|| inputArea.val() !== "0" && !ariBool){
          inputArea.val(inputArea.val()+clickData);//영이 아닐때
        }else{//영일때 대채
          ariBool = false; //이제 연산버튼 안눌렀어
          inputArea.val(clickData); //대체
        }
          
      });
 
      /* 
      @TODO
        1. 계산값이 저장 되어야 함
        2. 연산값은 따로 저장 되야 함 
        2. 계산 과정이 배열에 저장되야 함.
        3. 결과값 실시간으로 인풋창에 출력 되야함

      */
      ariBtns.on("click",function(el){
        
        let clickData = el.target.innerHTML;
        let tempStr = "";

        ariBool = true;//연산식 눌렸어요
        arrData.push(inputArea.val());//입력창에 있는 데이터
        arrData.push(clickData); // 지금 누른 연산식
        
 
         
        if(arrData.length > 2){
          console.log("2넘어갔어!");

          if(calData.length > 0){//N개의 연산식이 타는 곳
            
            tempStr += calData[calData.length-1]; // 결과 값 배열의 마지막 데이터를 가지고옴
            for(var i = arrData.length-3; i < arrData.length-1 ; ++i){
              tempStr+=arrData[i];
            }

          }else{//첫 연산 계산식이 타는 곳
            for(var i = 0; i < arrData.length-1 ; ++i){
              tempStr+=arrData[i];
            }
          }

          calData.push(eval(tempStr));
          inputArea.val(calData[calData.length-1]);

          console.log(arrData);
          console.log(calData);
        
        }

      });

      acBtn.on("click",function(el){
        // 입력창 0
        // 배열 두개 다 []
        inputArea.val(0);
        calData = [];
        arrData = [];
      });

      eqBtn.on("click",function(el){
        /*
          arr1 = [1,+,1,*,5,*,4,+]
          arr2 = [2,10,40] 값 // 고려할 사항이아니야
          arr1 = [1,+,1,*,5,*] (4)<-입력창
          arr2 = [2,10] 값

                  숫자버튼 * n -> 연산자 -> 숫자n개
          ariBool    false   -> true  -> false
        */

        if(!ariBool){//사용자가 연산자를 누르고 다시 숫자를 눌렀을때는 
          var tempStr = calData[calData.length-1]+arrData[arrData.length-1]+inputArea.val();
          inputArea.val(eval(tempStr));
        }else{
          // 마지막 문자열님이 문자에요
        }

      });

    });
  </script>
</html>